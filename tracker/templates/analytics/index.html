{% extends 'tracker/header.html'%}

{% load bootstrap3 %}


{% block body %}

    <div class="container expense-analysis">
        {% if menu_labels %}
        <div class="analysis-menu">
            <ul class="nav nav-tabs">
                {% for label in menu_labels %}
                  <li class="nav-item">
                      {% if context_type == 'annually' %}
                          <!--TODO: convert it to month str-->
                        <a class="annually nav-link" href="{% url 'tracker:analytics'%}/{{label}}"> {{label}}</a>
                      {% elif context_type == 'monthly'%}
                        <a class="annually nav-link" href="{% url 'tracker:analytics'%}/{{selected_year}}/{{label}}"> {{label}}</a>
                      {% endif %}
                  </li>
                {% endfor%}
                </ul>
        </div>
        {% endif %}

        <canvas id="myChart" width="500" height="250"></canvas>
    </div>


    <script>
        var ctx = document.getElementById("myChart").getContext('2d');
        var isShowScales = {% if report_type != 'pie' %}true{% else %}false {% endif %};
        var xAxisLabel = '{{x_axis_label}}';
        var dataset;
        var myChart = new Chart(ctx, {
            type: '{{report_type}}',
            data: {
                labels: {{ labels | safe }},
                datasets: {{ datasets | safe}}
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: '{{ title }}'
                },
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                }
                ,
                scales: {
                    xAxes: [{
                        display: isShowScales,
                        scaleLabel: {
                            display: isShowScales,
                            labelString: xAxisLabel
                        }
                    }],
                    yAxes: [{
                        display: isShowScales,
                        scaleLabel: {
                            display: isShowScales,
                            labelString: 'Amount'
                        }
                    }]
                }
            }
        });
    </script>
{% endblock %}


